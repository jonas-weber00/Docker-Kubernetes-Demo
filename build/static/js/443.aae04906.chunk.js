"use strict";(self.webpackChunknft_launchpad_near=self.webpackChunknft_launchpad_near||[]).push([[443],{39443:(e,n,t)=>{t.r(n),t.d(n,{default:()=>M});var a,o=t(72791),c=t(16871),i=t(36151),r=t(64554),s=t(39281),l=t(79836),d=t(56890),h=t(35855),u=t(53994),m=t(53382),x=t(13400),p=t(13239),b=t(20890),g=t(41517),j=t(3746),f=t(82271),Z=t(35083),C=t(30168),w=t(11668),y=t(17939),v=t(88219);const k=(0,y.ZP)(v.q)(a||(a=(0,C.Z)(["\n\n  .project-list {\n    flex-direction: column;\n    align-items: flex-end;\n  }\n\n  button {\n    text-transform: none !important;\n  }\n\n  @media (max-width: ","px) {\n    \n  }\n\n  // pc\n  @media (min-width: ","px) {\n  }\n\n  // under pc\n  @media (max-width: ","px) {\n  }\n\n  // mobile\n  @media (max-width: ","px) {\n  }\n"])),w.s.mobile.max,w.s.monitor.min,w.s.pc.max,w.s.mobile.max),S=(0,y.ZP)(u.Z)((()=>({borderBottom:"none",height:"70px",fontSize:"20px",color:"#253b80"})));var _=t(76705),A=t(43348),N=t(59733),P=t(36540),T=t(55931),W=t(5289),I=t(65661),F=t(39157),O=t(51691),R=t(97123),L=t(80184);const q=o.forwardRef((function(e,n){return(0,L.jsx)(T.Z,{direction:"up",ref:n,...e})})),B=e=>{let{isOpen:n,setIsOpen:t,title:a,description:o,contract:c,confirmText:r="Confirm",cancelText:s="Cancel",onConfirm:l}=e;const d=()=>{t(!1)};return(0,L.jsxs)(W.Z,{open:n,TransitionComponent:q,onClose:d,"aria-labelledby":"confirm-dialog-title","aria-describedby":"confirm-dialog-description",children:[(0,L.jsx)(I.Z,{id:"confirm-dialog-title",children:a}),(0,L.jsx)(F.Z,{children:(0,L.jsx)(O.Z,{id:"confirm-dialog-description",children:o})}),(0,L.jsxs)(R.Z,{children:[(0,L.jsx)(i.Z,{onClick:d,color:"primary",children:s}),(0,L.jsx)(i.Z,{onClick:()=>{t(!1),l(c)},color:"primary",autoFocus:!0,children:r})]})]})};var E=t(19218),Y=t(96665),z=t(58963),D=t(90528),U=t(37940);function $(e){let{open:n,setOpen:t}=e;const{showSpinner:a,hideSpinner:c}=(0,U.y)(),{showAlert:r}=(0,D.V)(),{selector:s,account:l,accountId:d,setWalletSignin:h}=(0,N.s)(),[u,m]=o.useState(""),[x,p]=o.useState(""),[b,g]=o.useState(""),[j,f]=o.useState(""),Z=()=>{t(!1)},C=o.useCallback((async e=>{const n=new z.Contract(l,Y.AL,{viewMethods:["get_required_deposit"]});return await n.get_required_deposit({account_id:d,args:{owner_id:d,metadata:{spec:"",name:u,symbol:b,icon:"null",base_uri:e,reference:"None",reference_hash:"null"}}})}),[s,d,u,b,l]),w=o.useCallback((async()=>{a();const e=(0,A.zs)(30),n=_.Kr,t=await C(n),o=await(null===l||void 0===l?void 0:l.getAccountBalance());if(console.log("requiredDeposit",t,null===o||void 0===o?void 0:o.available),Number(t)>Number(null===o||void 0===o?void 0:o.available))return r("info","You have no enough NEAR balance to create new contract. You need ".concat(Number(t)/10**24," NEAR.")),void c();h(Y.AL,"create_token",(async a=>{if(!a)return;const o=await s.wallet(),i={type:"FunctionCall",params:{methodName:"create_token",args:{args:{owner_id:d,metadata:{spec:"",name:u,symbol:b,icon:"null",base_uri:n,reference:"None",reference_hash:"null"}}},gas:"200000000000000",deposit:"".concat(t)}};o.signAndSendTransaction({actions:[i],callbackUrl:"http://localhost:2007/projects"}).then((()=>{const n={name:u,symbol:b,owner:d,contract:"".concat(b.toLowerCase(),".").concat(Y.AL),uri:e};A.be.post("/contract",n).then((e=>{e.data.success&&(r("success","You shave created new NFT contract successfully!"),c(),Z())}))})).catch((e=>{throw console.log(e),alert("Failed FunctionCall create new NFT Contract"),c(),e}))}))}),[s,d,u,b,l]);return(0,L.jsx)(o.Fragment,{children:(0,L.jsxs)(W.Z,{open:n,onClose:Z,fullWidth:!0,children:[(0,L.jsx)(I.Z,{children:"Let's Create Your Contract"}),(0,L.jsxs)(F.Z,{sx:{m:4},children:[(0,L.jsx)(E.Z,{autoFocus:!0,error:!!x,helperText:x,margin:"dense",id:"collection",name:"collection",label:"Collection Name",type:"text",fullWidth:!0,variant:"standard",value:u,onChange:e=>{const n=e.target.value;/^[a-z0-9]+$/.test(n)?p(""):p("Name can only contain lowercase letters and numbers."),m(n)}}),(0,L.jsx)(E.Z,{autoFocus:!0,error:!!j,helperText:j,margin:"dense",id:"symbol",name:"symbol",label:"Symbol",type:"text",fullWidth:!0,variant:"standard",value:b,onChange:e=>{const n=e.target.value;/^.{1,5}$/.test(n)?f(""):f("Symbol can't be longer than 5 characters"),g(n)}})]}),(0,L.jsxs)(R.Z,{children:[(0,L.jsx)(i.Z,{onClick:Z,children:"Cancel"}),(0,L.jsx)(i.Z,{onClick:w,children:"Subscribe"})]})]})})}var H=t(81874),J=t(45680);const K=[{id:"name",label:"Name",minWidth:150},{id:"symbol",label:"Symbol",minWidth:100},{id:"owner",label:"Owner",minWidth:170},{id:"contract",label:"Contract",minWidth:170},{id:"action",label:"Actions",minWidth:70,align:"right"}];function M(){const e=(0,c.s0)(),{selector:n,accountId:t}=(0,N.s)(),[a,C]=(0,o.useState)(!1),[w,y]=(0,o.useState)(0),[v,T]=(0,o.useState)(10),[W,I]=(0,o.useState)([]),[F,O]=(0,o.useState)(!1),[R,q]=(0,o.useState)(!1),[E,Y]=(0,o.useState)(!1),[z,D]=(0,o.useState)(""),U=n=>{e("/view?contract=".concat(n))};return(0,o.useEffect)((()=>{(async()=>{const e=n.isSignedIn();C(e),e&&!R&&(O(!0),A.be.get("/contract?accountId=".concat(t)).then((e=>{const n=e.data.tokens.map((e=>({...e,action:""})));I(n),O(!1)})))})()}),[t,R]),(0,L.jsxs)(k,{children:[!a&&(0,L.jsx)(H.Z,{}),(0,L.jsxs)(J.iW,{children:[(0,L.jsx)(P.Z,{title:"PROJECTS"}),(0,L.jsx)(i.Z,{variant:"contained",disabled:!a,onClick:()=>{q(!0)},children:"Create Project"})]}),(0,L.jsxs)(r.Z,{className:"project-list",display:"flex",mt:2,children:[(0,L.jsxs)(s.Z,{sx:{borderRadius:"15px",height:700,bgcolor:"#2d2df70d"},children:[(0,L.jsxs)(l.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,L.jsx)(d.Z,{children:(0,L.jsx)(h.Z,{children:K.map((e=>(0,L.jsx)(u.Z,{align:e.align,sx:{minWidth:e.minWidth,color:"#253b80bf",borderBottom:"solid 1px rgb(37 59 128 / 50%)"},children:e.label.toUpperCase()},e.id)))})}),(0,L.jsx)(m.Z,{children:W.length>0&&W.slice(w*v,w*v+v).map(((e,n)=>(0,L.jsx)(h.Z,{hover:!0,role:"checkbox",tabIndex:-1,sx:{background:"#f9f9fb","&:hover":{cursor:"pointer",backgroundColor:"#001dff14 !important"}},children:K.map((n=>{const t=e[n.id];return(0,L.jsx)(S,{align:n.align,onClick:()=>"action"!==n.id?U(e.contract):null,children:"action"!==n.id?"name"===n.id?(0,L.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,L.jsx)(r.Z,{component:"img",src:e.icon?"".concat(_.LB,"/").concat(e.icon):_.yD,alt:"Image Alt Text",sx:{height:30,width:30,borderRadius:"5px"}}),t]}):t:(0,L.jsxs)(r.Z,{sx:{display:"flex",justifyContent:"flex-end"},children:[(0,L.jsx)(x.Z,{color:"info","aria-label":"add to shopping cart",onClick:()=>U(e.contract),children:(0,L.jsx)(j.Z,{})}),(0,L.jsx)(x.Z,{color:"error","aria-label":"add to shopping cart",onClick:()=>{return n=e.contract,Y(!0),void D(n);var n},children:(0,L.jsx)(f.Z,{})})]})},n.id)}))},n)))})]}),F?(0,L.jsx)(r.Z,{p:3,textAlign:"center",children:(0,L.jsx)(p.Z,{})}):0===W.length&&(0,L.jsxs)(r.Z,{sx:{textAlign:"center",mt:15},children:[(0,L.jsx)(r.Z,{component:"img",src:Z,alt:"Image Alt Text",sx:{borderRadius:"50%",height:100,width:100,mb:5}}),(0,L.jsx)(b.Z,{variant:"h4",children:"There are no Projects."})]})]}),(0,L.jsx)(g.Z,{rowsPerPageOptions:[10,25,100],component:"div",count:W.length,rowsPerPage:v,page:w,onPageChange:(e,n)=>{y(n)},onRowsPerPageChange:e=>{T(+e.target.value),y(0)}}),(0,L.jsx)(B,{isOpen:E,setIsOpen:Y,title:"Confirm Deletion",description:"Are you sure you want to delete this project?",contract:z,onConfirm:e=>{A.be.post("/contract/delete?contract=".concat(e,"&accountId=").concat(t)).then((e=>{const n=e.data.tokens.map((e=>({...e,action:""})));I(n)}))}})]}),(0,L.jsx)($,{open:R,setOpen:q})]})}}}]);
//# sourceMappingURL=443.aae04906.chunk.js.map